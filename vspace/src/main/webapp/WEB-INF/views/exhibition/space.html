<html layout:decorate="~{layouts/main}">
<head>


<style>
.Info_cz_Class .tooltiptext {
    visibility: hidden;
    width: 120px;
    color: white;
    text-align: center;
    font-size: 12px;
    padding: 3px 0;
    border-radius: 6px;
    position: absolute;
    z-index: 1;
    left: -38px;
    top: 27px;
    background: rgba(0, 0, 0, 0.6);
}

.Info_cz_Class:hover .tooltiptext {
    visibility: visible;
}

.sidenav {
    width: 0;
    height: 799px;
    position: absolute;
    z-index: 1;
    top: 20px;
    left: 0 px;
    overflow-x: hidden;
    background: #fff;
    transition: 0.5s;
    box-shadow: 5px 5px 5px 0 px rgba(0 px, 0 px, 0 px, 0.19 px);
    padding-top: 26px;
    word-break: break-all;
}

.barPosition {
    top: 25px
}

@media only screen and (max-width: 800px) {
    /* For mobile phones: */
    [class*="barPosition"] {
        font-size: 12px;
    }
    [class*="closebtn"] {
        font-size: 12px;
    }
    [class*="sidenav"] {
        font-size: 12px;
        padding-top: 20px;
        height: 260px;
    }
    [class*="Home_Class"] {
        min-height: 540px;
    }
    [class*="Group_3_Class"] {
        top: 50px;
    }
    [class*="sideModulenav"] {
        top: 34px;
        height: 260px;
    }
    [class*="spaceName"] {
        font-size: 20px;
    }
}
</style>

</head>

<body>
    <div layout:fragment="content">
        <script th:inline="javascript">
		//# sourceURL=click.js
		let maxWidth='(max-width: 1200px)';
		function openNav(){
            if (window.matchMedia(maxWidth).matches){
                $("#mySidenav").css("width", "170px");
                $("#mySidenav").css("height", "260px");
            }
		    else{
		        $("#mySidenav").css("width", "240px");
		        $("#mySidenav").css("height", "[(${display.height})]px");
            }
        }
		function closeNav(){
		    $("#mySidenav").css("width", "0px");
		}
		function openModuleNav(){
		    if (window.matchMedia(maxWidth).matches){
		        $("#mySideModulenav").css("width", "170px");
		        $("#mySideModulenav").css("height", "auto");
		    }
		    else{
		        $("#mySideModulenav").css("width", "240px");
		        $("#mySideModulenav").css("height", "auto");
		    }
		}
		function closeModuleNav(){
		    $("#mySideModulenav").css("width", "0px");
		}
		
		function closeSpaceDescription(){
		    $("#rightContent").css("width", "0px");
		    $("#rightContent").css("height", "0px");
		}
		
		function openSpaceDescription(){
		    if (window.matchMedia(maxWidth).matches){
		        $("#rightContent").css("height", "170px");
		        $("#rightContent").css("width", "260px");
		    }
		    else{
		        $("#rightContent").css("width", "300px");
		        $("#rightContent").css("height", "[(${display.height})]px");
		    }
		}
		
		$(window).on("load", function() {
		    let spaceHeight = $("#bgImage").css("height");
		    $("#Module_1").css("height",spaceHeight);
			$( window ).resize(function() {
				$("#space a").remove();
		    	drawLinks();
		    });
		    drawLinks();
		});
		
		function drawLinks() {
			[# th:each="link, iStat : ${spaceLinks}" ]
			[# th:if="${link != null}" ]
		        var posX = parseInt($("#space").css('margin-left')) + $("#space").position().left; 
		        var posY = $("#space").position().top;
		        var link = $('<a></a>');
		        link.attr("href", "[(${link.link.targetSpace.id})]");
		            var linkDisplay=$('<div class="InfoSpace_${iStat} Info_cz_Class"><svg class="Ellipse_8_c"><ellipse fill="rgba(222,222,222,1)" class="Ellipse_8_c_Class" rx="14.5" ry="14.5" cx="14.5" cy="14.5"></ellipse></svg><svg class="Ellipse_10_c"><ellipse fill="rgba(240,240,240,1)" class="Ellipse_10_c_Class" rx="12.5" ry="12.5" cx="12.5" cy="12.5"></ellipse></svg><svg class="Ellipse_9_c"><ellipse fill="rgba(255,255,255,1)" class="Ellipse_9_c_Class" rx="10.5" ry="10.5" cx="10.5" cy="10.5"></ellipse></svg><i class="fas fa-walking fa-lg Icon_awesome_info_c"></i><span class="tooltiptext">[(${link.link.name})]</span></div>');
		
		           
		        linkDisplay.css('position', 'absolute');
		        linkDisplay.css('transform', 'rotate([(${link.rotation})]deg)');
		        linkDisplay.css('fill', 'grey'); 
		        linkDisplay.css('color', 'rgba(128,128,128,1)');
		        var height = parseInt($("#bgImage").css("height"));
		        var width = parseInt($("#bgImage").css("width"));
		        var	linkPosX=(width*[(${link.positionX})])/[(${display.width})];
		        var	linkPosY=(height*[(${link.positionY})])/[(${display.height})];
		        linkDisplay.css('left',linkPosX + posX);
		        linkDisplay.css('top', linkPosY + posY);
		        link.append(linkDisplay);
		        $("#space").append(link);
		        $(".label-[(${iStat.index})]").css({
		          'transform': 'rotate(0deg)',
		          'left': [(${link.positionX})] + posX - 10, 
		          'padding-top': '30px',
		          'color': 'rgba(150, 45, 62, 1)',
		          'font-size': '12px',
		          'overflow': 'visible'
		        });
		    [/]
		    [/]
		   
		    [# th:each="link, iStat : ${moduleList}" ]
			[# th:if="${link != null}" ]	
		        var posX = parseInt($("#space").css('margin-left')) + $("#space").position().left; 
		        var posY = $("#space").position().top;
		        var link = $('<a></a>');
		        var moduleLinkURL = [[@{|/exhibit/${space.id}/module/${link.link.module.id}|}]];
		        
		        link.attr("href", moduleLinkURL)
		        var linkDisplay = $('<div class="InfoModule_${iStat} Info_cz_Class"><svg class="Ellipse_8_c"><ellipse fill="rgba(222,222,222,1)" class="Ellipse_8_c_Class" rx="14.5" ry="14.5" cx="14.5" cy="14.5"></ellipse></svg><svg class="Ellipse_10_c"><ellipse fill="rgba(240,240,240,1)" class="Ellipse_10_c_Class" rx="12.5" ry="12.5" cx="12.5" cy="12.5"></ellipse></svg><svg class="Ellipse_9_c"><ellipse fill="rgba(255,255,255,1)" class="Ellipse_9_c_Class" rx="10.5" ry="10.5" cx="10.5" cy="10.5"></ellipse></svg><i class="fas fa-info fa-lg Icon_awesome_info_m"></i><span class="tooltiptext">[(${link.link.name})]</span></div>');
		        linkDisplay.css('position', 'absolute');
		        linkDisplay.css('transform', 'rotate([(${link.rotation})]deg)');
		        linkDisplay.css('fill', 'grey'); 
		        linkDisplay.css('color', 'rgba(128,128,128,1)');
		        var height = parseInt($("#bgImage").css("height"));
		        var width = parseInt($("#bgImage").css("width"));
		        var	linkPosX=(width*[(${link.positionX})])/[(${display.width})];
		        var	linkPosY=(height*[(${link.positionY})])/[(${display.height})];
		        linkDisplay.css('left',linkPosX + posX);
		        linkDisplay.css('top', linkPosY + posY);
		        link.append(linkDisplay);
		        $("#space").append(link);
		        $(".moduleLabel-[(${iStat.index})]").css({
		            'transform': 'rotate(0deg)',
		            'left': [(${link.positionX})] + posX - 10,
		            'padding-top': '30px',
		            'color': 'rgba(150, 45, 62, 1)',
		            'font-size': '12px'
		          });
		    [/]
		    [/]
		    
		    [# th:each="link, iStat : ${externalLinkList}" ]
			[# th:if="${link != null}" ]
		    {
		        var posX = parseInt($("#space").css('margin-left')) + $("#space").position().left; 
		        var posY = $("#space").position().top;
		        var link = $('<a></a>');
		        link.attr('href', "[(${link.externalLink.externalLink})]");
		        link.attr('target', "_blank");
		        var linkDisplay = $('<span class="fas fa-globe"></span>');
		            var linkDisplay = $('<div class="InfoExt_${iStat} Info_cz_Class"><svg class="Ellipse_8_c"><ellipse fill="rgba(222,222,222,1)" class="Ellipse_8_c_Class" rx="14.5" ry="14.5" cx="14.5" cy="14.5"></ellipse></svg><svg class="Ellipse_10_c"><ellipse fill="rgba(240,240,240,1)" class="Ellipse_10_c_Class" rx="12.5" ry="12.5" cx="12.5" cy="12.5"></ellipse></svg><svg class="Ellipse_9_c"><ellipse fill="rgba(255,255,255,1)" class="Ellipse_9_c_Class" rx="10.5" ry="10.5" cx="10.5" cy="10.5"></ellipse></svg><i class="fas fa-external-link-alt fa-lg Icon_awesome_info_e"></i><span class="tooltiptext">[(${link.name})]</span></div>');
		        
		        linkDisplay.css('position', 'absolute');
		        linkDisplay.css('transform', 'rotate([(${link.rotation})]deg)');
		        linkDisplay.css('fill', 'grey'); 
		        linkDisplay.css('color', 'rgba(128,128,128,1)');
		        var height = parseInt($("#bgImage").css("height"));
		        var width = parseInt($("#bgImage").css("width"));
		        var	linkPosX=(width*[(${link.positionX})])/[(${display.width})];
		        var	linkPosY=(height*[(${link.positionY})])/[(${display.height})];
		        linkDisplay.css('left',linkPosX + posX);
		        linkDisplay.css('top', linkPosY + posY);
		        link.append(linkDisplay);
		        $("#space").append(link);
		        $(".externalLabel-[(${iStat.index})]").css({
		            'transform': 'rotate(0deg)',
		            'left': [(${link.positionX})] + posX - 10,
		            'padding-top': '30px',
		            'color': 'rgba(150, 45, 62, 1)',
		            'font-size': '12px'
		          });
		    }
		    [/]
		    [/]
		}
	</script>
        <div class="container-fluid"
            th:style="${showAlert} ? 'display:none' : 'display:block'">
            <div class="modalDown alert alert-warning center col-md-12"
                style="text-align: center;"
                th:style="${exhibitionConfig.mode == 'ACTIVE'? 'display:block' : 'display:none'}">
                <h6
                    th:if="${exhibitionConfig.customMessage != '' && exhibitionConfig.mode == 'OFFLINE'}">[[${exhibitionConfig.customMessage}]]</h6>
                <h6
                    th:unless="${exhibitionConfig.customMessage != '' && exhibitionConfig.mode == 'OFFLINE'}">[[${exhibitionConfig.mode.value}]]</h6>
            </div>
            <div id="Module_1" class="Home_Class">
                <div class="dropdown">
                    <div id="mySidenav" class="sidenav">
                        <i class="far fa-times-circle fa-lg closebtn"
                            th:onclick="closeNav()"></i>
                        <div class="list-group spaceNav">
                            <ul th:each="space: ${publishedSpaces}">
                                <li><a class="dropdown-item"
                                    th:href="@{'/exhibit/space/'+${space.id}}">[[${space.name}]]</a>
                            </ul>
                        </div>
                    </div>
                    <i class="fas fa-bars fa-lg barPosition"
                        th:onclick="openNav()"></i>
                </div>
                <div class="spaceClass" id="spaceDiv"
                    style="width: 80%; margin: auto; display: flex; justify-content: center; padding-top: 22px;">
                    <div>
                        <div class=dropdown  th:if="${moduleList.size() > 0}">
                            <div id="mySideModulenav"
                                class="sideModulenav">
                                <i
                                    class="far fa-times-circle fa-lg closebtn"
                                    th:onclick="closeModuleNav()"></i>
                                <div class="list-group spaceNav">
                                    <ul style="list-style: none;"
                                        th:each="module: ${moduleList}">
                                        <li
                                            th:if="${!#strings.isEmpty(module.link.name)}"><a
                                            class="dropdown-item"
                                            th:href="@{'/exhibit/'+${space.id}+'/module/'+${module.link.module.id}}"><div class="Info Info_cz_module_Class"><svg class="Ellipse_8_module_c_sidenav"><ellipse fill="rgba(222,222,222,1)" class="Ellipse_8_c_Class" rx="14.5" ry="14.5" cx="14.5" cy="14.5"></ellipse></svg><svg class="Ellipse_10_module_c_sidenav"><ellipse fill="rgba(240,240,240,1)" class="Ellipse_10_c_Class" rx="12.5" ry="12.5" cx="12.5" cy="12.5"></ellipse></svg><svg class="Ellipse_9_module_c_sidenav"><ellipse fill="rgba(255,255,255,1)" class="Ellipse_9_c_Class" rx="10.5" ry="10.5" cx="10.5" cy="10.5"></ellipse></svg><i class="fas fa-info fa-lg Icon_awesome_info_module_m_sidenav"></i></div>[[${module.link.name}]]</a></li>
                                        <li
                                            th:if="${#strings.isEmpty(module.link.name)}"><a
                                            class="dropdown-item"
                                            th:href="@{'/exhibit/'+${space.id}+'/module/'+${module.link.module.id}}"><div class="Info Info_cz_module_Class"><svg class="Ellipse_8_module_c_sidenav"><ellipse fill="rgba(222,222,222,1)" class="Ellipse_8_c_Class" rx="14.5" ry="14.5" cx="14.5" cy="14.5"></ellipse></svg><svg class="Ellipse_10_module_c_sidenav"><ellipse fill="rgba(240,240,240,1)" class="Ellipse_10_c_Class" rx="12.5" ry="12.5" cx="12.5" cy="12.5"></ellipse></svg><svg class="Ellipse_9_module_c_sidenav"><ellipse fill="rgba(255,255,255,1)" class="Ellipse_9_c_Class" rx="10.5" ry="10.5" cx="10.5" cy="10.5"></ellipse></svg><i class="fas fa-info fa-lg Icon_awesome_info_module_m_sidenav"></i></div>[[${module.link.module.name}]]</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="Group_3_Class"
                                th:onclick="openModuleNav()">
                                <svg class="Ellipse_8_dc">
		                        <ellipse fill="rgba(222,222,222,1)"
                                        class="Ellipse_8_dc_Class"
                                        rx="19.5" ry="19.5" cx="19.5"
                                        cy="19.5">
		                        </ellipse>
		                    </svg>
                                <svg class="Ellipse_10_dd">
		                        <ellipse fill="rgba(240,240,240,1)"
                                        class="Ellipse_10_dd_Class"
                                        rx="16.5" ry="16.5" cx="16.5"
                                        cy="16.5">
		                        </ellipse>
		                    </svg>
                                <svg class="Ellipse_9_de">
		                        <ellipse fill="rgba(255,255,255,1)"
                                        class="Ellipse_9_de_Class"
                                        rx="13.5" ry="13.5" cx="13.5"
                                        cy="13.5">
		                        </ellipse>
		                    </svg>
                                <i
                                    class="fas fa-grip-vertical fa-lg moduleBarPosition"></i>
                            </div>
                        </div>
                        <div class="text-Div">
                            <h3 class="spaceName">
                                [[${space.name}]] <i
                                    th:if="${!#strings.isEmpty(space.description)}"
                                    class="fas fa-info-circle fa-lg"
                                    style="font-size: 20px; color: rgba(150, 45, 62, 1);"
                                    th:onclick="openSpaceDescription()"></i>
                                <a sec:authorize="isAuthenticated()"
                                    th:href="@{|/staff/space/${space.id}|}"><span
                                    style="display: inline-block; color: rgba(150, 45, 62, 1);"><i
                                        class="fas fa-edit"
                                        style="display: inline-block;"></i></span></a>
                            </h3>
                        </div>

                        <div id="space">

                            <img
                                th:style="|max-width: ${space.image.width}px; border-radius: 13px; width: 100%;|"
                                id="bgImage"
                                th:src="@{'/api/image/'+${space.image.id}}">
                        </div>
                    </div>
                    <div id="rightContent"
                        th:if="${space.description!=NULL}">
                        <i class="far fa-times-circle fa-lg closebtn"
                            th:onclick="closeSpaceDescription()"></i>
                        <div class="spaceDescription">[[${space.description}]]</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>