<html layout:decorate="~{layouts/main_staff}">
<head>
<link rel="stylesheet"
            href="https://unpkg.com/easymde/dist/easymde.min.css">
        <script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
        <style type="text/css">
            .hova {
            background-color: #f2f2f2;
            }
            .EasyMDEContainer .CodeMirror-wrap{
            overflow-y: scroll;
            height: 400px;
            }
        </style>
    
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script th:inline="javascript">
  //# sourceURL=click.js
  var markDown = null;
  var defaultValue;
  $(document).ready(function() {
  	
  	var timeout=null;
  	$('#spaceOrder').sortable({
      	update: function(event,ui) {
          	var jsonObj = [];
          	var blockId;
          	$(this).children().each(function(index,element){
	            	if(typeof($(element.innerHTML).filter('div').attr('data-position'))=="undefined") {
	            		blockId=$(element).attr('id');
	            	}else {
	            		blockId = $(element.innerHTML).filter('div').attr('id');
	            	}
	            	item = {}
	            	item ["id"] = blockId;
	            	item ["contentOrder"] = index;
	            	jsonObj.push(item);
	            	$(element.innerHTML).filter('div').attr('data-position',index);
          	});
          	var token = [[${_csrf.token}]];
          	if (jsonObj.length != 0){
	            	if (timeout == null){
	            		timeout = setTimeout(updateContentOrder(jsonObj,token), 1000);
	            	}
	            	else{
	            		clearTimeout(timeout);
	            		timeout = setTimeout(updateContentOrder(jsonObj,token), 1000);
	            	}
          	}
      	}
  	});
  	
  });
</script>
<style>

</style>
</head>

  <body>
    <div id="slideSpace"  class="main-content" layout:fragment="content">
    	<div th:each="contents: ${spaces}">
	    	<div th:attr="data-position=${contents.customOrder}" th:id="${contents.id}" class="valueDiv tab row" >
	             <p class="col-md-10">[[${contents.id}]]</p>
		    </div>
    	</div>
	</div>
</body>
</html>