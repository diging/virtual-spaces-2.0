<html layout:decorate="~{layouts/main_staff}">
<head>
<script th:src="@{/resources/bootpag/js/bootpag.min.js}"></script>
<script th:inline="javascript">
	$(document).ready(function($) {
		$("#space").removeClass("active");
		$("#module").removeClass("active");
		$("#slide").removeClass("active");
		$("#slideText").removeClass("active");
		
		var tab = [[${activeTab}]];
		$("#"+tab).addClass("active");
		$('#my'+tab).addClass('active');
		$('#my'+tab).addClass('show');
		
		var spaceModelAttributeValue = [[${spaceSearchResults}]];
        if(spaceModelAttributeValue.length != 0) {
            $("#spaceNoResult").hide();
            $("#spaceResultDisplay").show();
        }
        else {
        	   $("#spaceNoResult").show();
               $("#spaceResultDisplay").hide();
        }
		
        var moduleModelAttributeValue = [[${moduleSearchResults}]];
        if(moduleModelAttributeValue.length != 0) {
            $("#moduleNoResult").hide();
            $("#moduleResultDisplay").show();
        }
        else {
        	 $("#moduleNoResult").show();
            $("#moduleResultDisplay").hide();
        }  
		
        var slideModelAttributeValue = [[${slideSearchResults}]];
        if(slideModelAttributeValue.length != 0) {
            $("#slideNoResult").hide();
            $("#slideResultDisplay").show();
        }
        else {
        	   $("#slideNoResult").show();
               $("#slideResultDisplay").hide();
        } 
        
        var slideTextModelAttributeValue = [[${slideTextSearchResults}]];
        if(slideTextModelAttributeValue.length != 0) {
            $("#slideTextNoResult").hide();
            $("#slideTextResultDisplay").show();
        }
        else {
        	   $("#slideTextNoResult").show();
               $("#slideTextResultDisplay").hide();
        } 
        
        $('#spacepage-selection').bootpag({
	        total: [(${spaceTotalPages})],
	        page: [(${spaceCurrentPageNumber})],
	        maxVisible: 10,
	        leaps: true,
	        firstLastUse: true,
	        first: '|<',
	        last: '>|',
	        wrapClass: 'pagination',
	        activeClass: 'active',
	        disabledClass: 'disabled',
	        nextClass: 'next',
	        prevClass: 'prev',
	        lastClass: 'last',
	        firstClass: 'first'
	    }).on("page", function(event, num){
	        window.location.assign("./searchPage?page="+num+"&searchText="+[[${searchWord}]]+"&tab="+"space");
	    });
        
		 $('#modulepage-selection').bootpag({
		        total: [(${moduleTotalPages})],
		        page: [(${moduleCurrentPageNumber})],
		        maxVisible: 10,
		        leaps: true,
		        firstLastUse: true,
		        first: '|<',
		        last: '>|',
		        wrapClass: 'pagination',
		        activeClass: 'active',
		        disabledClass: 'disabled',
		        nextClass: 'next',
		        prevClass: 'prev',
		        lastClass: 'last',
		        firstClass: 'first'
		    }).on("page", function(event, num){
		        window.location.assign("./searchPage?page="+num+"&searchText="+[[${searchWord}]]+"&tab="+"module");
		    });
        
		  $('#slidepage-selection').bootpag({
		        total: [(${slideTotalPages})],
		        page: [(${slideCurrentPageNumber})],
		        maxVisible: 10,
		        leaps: true,
		        firstLastUse: true,
		        first: '|<',
		        last: '>|',
		        wrapClass: 'pagination',
		        activeClass: 'active',
		        disabledClass: 'disabled',
		        nextClass: 'next',
		        prevClass: 'prev',
		        lastClass: 'last',
		        firstClass: 'first'
		    }).on("page", function(event, num){
		        window.location.assign("./searchPage?page="+num+"&searchText="+[[${searchWord}]]+"&tab="+"slide");
		    });
		  
		  $('#slideTextPage-selection').bootpag({
		        total: [(${slideTextTotalPages})],
		        page: [(${slideTextCurrentPageNumber})],
		        maxVisible: 10,
		        leaps: true,
		        firstLastUse: true,
		        first: '|<',
		        last: '>|',
		        wrapClass: 'pagination',
		        activeClass: 'active',
		        disabledClass: 'disabled',
		        nextClass: 'next',
		        prevClass: 'prev',
		        lastClass: 'last',
		        firstClass: 'first'
		    }).on("page", function(event, num){
		        window.location.assign("./searchPage?page="+num+"&searchText="+[[${searchWord}]]+"&tab="+"slideText");
		    });

	});
</script>
<style>
.pagination>li>a {
    border: 1px solid var(--primary);
    padding: 5px;
    color: var(--primary);
    font-size: 15px;
}

.pagination>li.active>a {
    background: var(--primary);
    color: #fff;
    font-size: 15px;
}
a.nav-link.active.show
{
background:#F2A950;
}
</style>
</head>
<body>
<div layout:fragment="content" class="container">
<ul class="nav-tabs nav">
<li class="nav-item" style="background:#A55941;border:2px solid white;border-radius:6px;">
<a href="#space" id="myspace" class="nav-link" data-toggle="tab"><font color="#FFFFFF">Space</font></a>
</li>
<li class="nav-item" style="background:#A55941;border:2px solid white;border-radius:6px;">
<a href="#module" id="mymodule" class="nav-link" data-toggle="tab"><font color="#FFFFFF">Module</font></a>
</li>
<li class="nav-item" style="background:#A55941;border:2px solid white;border-radius:6px;">
<a href="#slide" id="myslide" class="nav-link" data-toggle="tab"><font color="#FFFFFF">Slide</font></a>
</li>
<li class="nav-item" style="background:#A55941;border:2px solid white;border-radius:6px;">
<a href="#slideText" id="myslideText" class="nav-link" data-toggle="tab"><font color="#FFFFFF">Slide text</font></a>
</li>
</ul>
<div class="tab-content container">

<div class="tab-pane" id="space">
<div><h3>Search Results For Spaces</h3>
            <h5>Keyword: <grey><b>[[${searchWord}]]</b></grey></h5></div>
            <div id="spaceNoResult">
            <h5><center>No result to display.</center></h5>
            </div>
<div id="spaceResultDisplay">
  <div th:each="contents: ${spaceSearchResults}">
  <div th:id="${contents.id}">
                        <a th:href="@{'/staff/space/'+${contents.id}}"
                            class="textDivStaff tab  btn btn-light"
                            style="width: 100%"> <span
                            class="card-title"
                            style="white-space: pre-wrap; line-break: anywhere;"><img
                            style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                            th:src="@{'/api/image/'+${contents?.image?.id}}" alt="Space image" /><span 
                            style="color: var(--dark-grey)">  Space:</span> [[${contents.name}]]<br><span 
                            style="color: var(--dark-grey)">  Description:</span> [[${contents.description}]]</span>
                        </a>
  </div>
  </div>
<br>
<div id="spacepage-selection"></div>
</div>
</div>

<div class="tab-pane" id="module">
<div><h3>Search Results For Modules</h3>
            <h5>Keyword: <grey><b>[[${searchWord}]]</b></grey></h5></div>
            <div id="moduleNoResult">
            <h5><center>No result to display.</center></h5>
            </div>
<div id="moduleResultDisplay">
<div th:each="contents: ${moduleSearchResults}">
  <div th:id="${contents.id}">
                        <th:block th:text="${conIndex.setLength(0)}" />
                        <a th:href="@{'/staff/module/'+${contents.id}}" style="width: 100%"
                            class="textDivStaff tab  btn btn-light">
                            <div th:each="slide, counter : ${contents.slides}"
                            th:unless="${counter.count > 1}">
                            <div th:each="img : ${slide.contents}"
                            th:if="${#strings.equals(img['class'].simpleName,'ImageBlock')}" th:unless="${#strings.length(conIndex.toString()) == 1}">
                            <img
                            style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                            th:src="@{'/api/image/'+${img?.image?.id}}" alt="Module image" />
                            <th:block th:text="${conIndex.setLength(1)}" />
                            </div>
                            </div>
                            <div th:if="${#strings.isEmpty(conIndex.toString())}">
                                 <img  style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                                 th:src="@{'/resources/images/placeholder.png'}"/>
                            </div>
                            <span class="card-title"
                            style="white-space: pre-wrap; line-break: anywhere;"><span 
                            style="color: var(--dark-grey)">  Module:</span> [[${contents.name}]]<br><span 
                            style="color: var(--dark-grey)">  Description:</span> [[${contents.description}]]</span>
                        </a>
    </div>
</div>
<br>
<div id="modulepage-selection"></div>
</div>
</div>

<div class="tab-pane" id="slide">
<div><h3>Search Results For Slides</h3>
            <h5>Keyword: <grey><b>[[${searchWord}]]</b></grey></h5></div>
            <div id="slideNoResult">
            <h5><center>No result to display.</center></h5>
            </div>
<div id="slideResultDisplay">
<div th:each="contents: ${slideSearchResults}">
  <div th:id="${contents.id}">
                        <th:block th:text="${conIndex.setLength(0)}" />
                        <a class="textDivStaff tab  btn btn-light" style="width: 100%"
                            th:href="@{'/staff/module/'+${contents.module.id}+'/slide/'+${contents.id}}">
                            <div th:each="contentBlocks : ${contents.contents}"
                            th:if="${#strings.equals(contentBlocks['class'].simpleName,'ImageBlock')}" th:unless="${#strings.length(conIndex.toString()) == 1}">
                                <img th:onerror="if (this.src != '@{/resources/images/placeholder.png}') this.src = '@{/resources/images/placeholder.png}'"
                                    style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                                    th:src="@{'/api/image/'+${contentBlocks?.image?.id}}" alt="Slide image" />
                                <th:block th:text="${conIndex.setLength(1)}" />
                            </div>
                            <div th:if="${#strings.isEmpty(conIndex.toString())}">
                                 <img  style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                                 th:src="@{'/resources/images/placeholder.png'}"/>
                            </div>
                            <span class="card-title"
                            style="white-space: pre-wrap; line-break: anywhere;"><span 
                            style="color: var(--dark-grey)">  Slide:</span> [[${contents.name}]]<br><span 
                            style="color: var(--dark-grey)">  Description:</span> [[${contents.description}]]</span>
                        </a>
   </div>
</div>
<br>
<div id="slidepage-selection"></div>
</div>
</div>

<div class="tab-pane" id="slideText">
<div><h3>Search Results For Slides TextBlocks</h3>
            <h5>Keyword: <grey><b>[[${searchWord}]]</b></grey></h5></div>
            <div id="slideTextNoResult">
            <h5><center>No result to display.</center></h5>
            </div>
<div id="slideTextResultDisplay">
<div th:each="contents: ${slideTextSearchResults}">
  <div th:id="${contents.id}">
                        <th:block th:text="${conIndex.setLength(0)}" />
                        <a class="textDivStaff tab  btn btn-light" style="width: 100%"
                            th:href="@{'/staff/module/'+${contents.module.id}+'/slide/'+${contents.id}}">
                            <div th:each="contentBlocks : ${contents.contents}"
                            th:if="${#strings.equals(contentBlocks['class'].simpleName,'ImageBlock')}" th:unless="${#strings.length(conIndex.toString()) == 1}">
                                <img th:onerror="if (this.src != '@{/resources/images/placeholder.png}') this.src = '@{/resources/images/placeholder.png}'"
                                    style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                                    th:src="@{'/api/image/'+${contentBlocks?.image?.id}}" alt="Slide image" />
                                <th:block th:text="${conIndex.setLength(1)}" />
                            </div>
                            <div th:if="${#strings.isEmpty(conIndex.toString())}">
                                 <img  style="border-radius: 25px; float: left; width: 150px; height: 150px;"
                                 th:src="@{'/resources/images/placeholder.png'}"/>
                            </div>
                            <span class="card-title"
                            style="white-space: pre-wrap; line-break: anywhere;"><span 
                            style="color: var(--dark-grey)">  Slide:</span> [[${contents.name}]]<br><span 
                            style="color: var(--dark-grey)">  Description:</span> [[${contents.description}]]</span>
                        </a>
   </div>
</div>
<br>
<div id="slideTextPage-selection"></div>
</div>
</div>
</div>
</div>
</body>
</html>
